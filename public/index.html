<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<script>
    window.performPCA = function(data) {
      // Transform your data into an array of values
      let items = Object.keys(data);
      let values = items.map(item => Object.values(data[item]));
  
      // Perform PCA
      let pca = new PCA(values);
  
      // Get the three first principal components
      let components = pca.predict(values, { nComponents: 3 });
  
      // Convert the result back into the original format
      let result = items.reduce((res, item, index) => {
          res[item] = {
              component1: components[index][0],
              component2: components[index][1],
              component3: components[index][2],
          };
          return res;
      }, {});
  
      return result;
    }
  </script>
  
<body>
    <h1>Hello LLM!</h1>
    <button id="toggleSidebarButton">Toggle Sidebar</button>
    <select id="sidebarSelector">
        <option value="logs">Logs</option>
        <option value="modelSelection">Model Selection</option>
        <option value="prompts">Prompts</option>
    </select>    
    <div id="my_dataviz"></div>
    
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h2 id="sidebarTitle">Logs</h2>
        </div>
        <div class="sidebar-content">
            <div id="promptEditors" style="display: none;"></div>
            <div id="logsContent"></div>
            <div id="modelSelectionContent" style="display: none;"></div> <!-- model list will be appended here -->
            <div id="modelParametersContent" style="display: none;"> <!-- model parameters are here -->
                <label for="temperature">Temperature:</label>
                <input type="range" id="temperature" name="temperature" min="0" max="1" step="0.01" value="0.5">
                
                <label for="top_p">Top P:</label>
                <input type="range" id="top_p" name="top_p" min="0" max="1" step="0.01" value="0.5">
                
                <p>Num return sequences:</p>
                <input type="radio" id="one" name="num_return_sequences" value="1" checked>
                <label for="one">1</label>
                <input type="radio" id="two" name="num_return_sequences" value="2">
                <label for="two">2</label>
                <input type="radio" id="three" name="num_return_sequences" value="3">
                <label for="three">3</label>
            </div>
        </div>
    </div>    

    
    <!-- User input field and ask button -->
    <input type="text" id="userInput" placeholder="What topic...">
    <button id="askButton">Ask</button>
    
    <!-- Area to display LLM responses -->
    <button id="listButton" style="display: none;">Proceed</button>
    <p id="llmListResponse"></p>

    <!-- Area to display LLM topic attributes -->
    <div id="llmTopicAttributes"></div>

    <!-- Vectorize button and area to display ratings -->
    <button id="vectorizeButton" style="display: none;">Vectorize</button>
    <button id="pcaButton" style="display: none;">PCA</button>
    <div id="llmRatings"></div>

    
    <script type="module" src="sidebar.js"></script>
     <!--<script type="module" src="sequence.js"></script> -->
    <script type="module" src="main.js"></script>

</body>
</html>

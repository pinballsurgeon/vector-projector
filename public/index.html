<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <script src="https://unpkg.com/three@0.130.1/build/three.min.js"></script>
        <script src="https://unpkg.com/three@0.130.1/examples/js/controls/OrbitControls.js"></script>
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjs/lib/browser/math.js"></script>
        <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>


    </head>
<body>
    <div id="header">
        <div id="site-logo">
            <img src="images/vectorprojector.png" alt="VectorProjector Logo" />
        </div>
    </div>
    
    <div id="combined-container">

        <div id="search-container">
            <input type="text" id="userInput" placeholder="What topic...">
            <button id="askButton">Ask</button>
            <select id="modelSelectionDropdown">
                <option value="tab-gpt-3.5-turbo">gpt-3.5-turbo</option>
                <option value="tab-gpt-4-turbo-preview">gpt-4-turbo</option>
                <option value="tab-gpt-4-1106-preview">gpt-4-1106</option>
                <option value="tab-gpt-4-0125-preview">gpt-4-0125</option>
                <option value="tab-gpt-4-turbo-2024-04-09">gpt-4-turbo-0409</option>
                <option value="tab-gemini-pro-1.0-001">gemini-pro-1.0-001</option>
                <option value="tab-gemini-pro-1.0-002">gemini-pro-1.0-002</option>
                <option value="tab-gemini-pro-1.5-0409">gemini-pro-1.5</option>
                <option value="tab-claude-v2">claude-2</option>
                <option value="tab-claude-v3">claude-3</option>
                <option value="tab-mistral-medium">mistral-medium</option>
                <option value="tab-mistral-large">mistral-large</option>

            </select>
        </div>        

        <div id='product-component-1714613806571'></div>
<script type="text/javascript">
/*<![CDATA[*/
(function () {
  var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
  if (window.ShopifyBuy) {
    if (window.ShopifyBuy.UI) {
      ShopifyBuyInit();
    } else {
      loadScript();
    }
  } else {
    loadScript();
  }
  function loadScript() {
    var script = document.createElement('script');
    script.async = true;
    script.src = scriptURL;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
    script.onload = ShopifyBuyInit;
  }
  function ShopifyBuyInit() {
    var client = ShopifyBuy.buildClient({
      domain: 'b43bfd-33.myshopify.com',
      storefrontAccessToken: '9e9e26394f29e98e4726ed47841ed663',
    });
    ShopifyBuy.UI.onReady(client).then(function (ui) {
      ui.createComponent('product', {
        id: '11092828225854',
        node: document.getElementById('product-component-1714613806571'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: {
                    "product": {
                        "styles": {
                        "product": {
                            "@media (min-width: 601px)": {
                            "max-width": "calc(25% - 20px)",
                            "margin-left": "20px",
                            "margin-bottom": "50px"
                            }
                        }
                        },
                        "buttonDestination": "checkout",
                        "contents": {
                        "img": false,
                        "title": false,
                        "price": false
                        },
                        "text": {
                        "button": "Buy now"
                        }
                    },
                    "productSet": {
                        "styles": {
                        "products": {
                            "@media (min-width: 601px)": {
                            "margin-left": "-20px"
                            }
                        }
                        }
                    },
                    "modalProduct": {
                        "contents": {
                        "img": false,
                        "imgWithCarousel": true,
                        "button": false,
                        "buttonWithQuantity": true
                        },
                        "styles": {
                        "product": {
                            "@media (min-width: 601px)": {
                            "max-width": "100%",
                            "margin-left": "0px",
                            "margin-bottom": "0px"
                            }
                        }
                        },
                        "text": {
                        "button": "Add to cart"
                        }
                    },
                    "option": {},
                    "cart": {
                        "text": {
                        "total": "Subtotal",
                        "button": "Checkout"
                        }
                    },
                    "toggle": {}
                    },
                        });
                        });
                    }
                    })();

</script>

        <div id="auth-status">
            <button id="btn-login" onclick="login()">Log In</button>
        </div>
        <div id="user-info-container">
            <span id="user-info"></span>
            <button id="btn-logout" onclick="logout()" style="display: none;">Log Out</button>
        </div>
        
        
    </div>

    <div id="main-content" style="display: flex;">

        <div style="width: 70%;">

            <div id="tab-sliver" class="tab">
                <button class="tablinks" id="tab-model">3D Space</button>
                <button class="tablinks" id="compareTab">Entropy</button>
                <!-- <button class="tablinks" id="attributesTab">Attributes</button> -->
                <button class="tablinks" id="modelLeaderTab">Leaders</button>
            </div>
        
            <div id="tab-content">
                <select id="metricSelect">
                    <option value="entropy">Relative Entropy</option>
                    <option value="items">Relative Number of Items</option>   
                    <option value="num_attributes">Relative Number of Attributes</option> 
                    <option value="volume">Relative Vector Volume</option>                    
                    <option value="stdDevAttributes">Relative Ratings StdDev</option>                                                         
                    <option value="density">Relative Density</option>
                    <option value="pairwise">Relative Pairwise Distance</option>
                    <option value="stdDevCentroid">Relative Centroid StdDev</option>
                    <option value="stdDevOrigin">Relative Origin StdDev</option>
                    <option value="queries">Number of Queries</option>                                                              
                </select>
                
                <div id="canvas-container" class="tabcontent" style="display: none;">
                    <div id="my_dataviz"></div>  <!-- Visualization specifically for 3D models -->
                    <canvas id="leaderChart"></canvas>  <!-- Dedicated canvas for the leader chart -->
                </div>
                
                <div id="compare-container" style="display: none;"></div>  <!-- Container for compare results -->

            </div>

        </div>

        <div id="new-sidebar-container" style="width: 30%;">
            <select id="newSidebarSelector">
                <option value="library">Library</option>
                <option value="logs">Logs</option>
                <option value="cubeContent">Cube Analytics</option>
                <option value="groups">Groups and Clustering</option>
                <option value="vectorMetrics">Vector Metrics</option>
            </select>

                    <div id="library" style="display: block;"></div>
                    <div id="promptEditors" style="display: none;"></div>
                    <div id="logsContent" style="display: none;"></div>
                    <div id="modelSelectionContent" style="display: none;"></div>
                    <div id="modelParametersContent" style="display: none;"></div>
                    <div id="cubeContent" style="display: none;">
                        <h3 id="sidebarTitle"></h3> 

                        <img id="sidebarCubeImage" src="" alt="Cube Image">
                    </div>
                    <div id="groupsContent" style="display: none;">
                        <p>Groups sidebar:</p>
                        <label for="sphereThreshold">Sphere Threshold (0-10):</label>
                        <input type="range" id="sphereThreshold" name="sphereThreshold" min="0" max="10" step="0.1" value="0.1">
                        <span id="thresholdValue">0.1</span>
                        <label for="minCubesSlider">Min Cubes per Sphere:</label>
                        <input type="range" id="minCubesSlider" min="0" max="10" value="0">
                        <label for="overlapSlider">Max Sphere Overlap (%):</label>
                        <input type="range" id="overlapSlider" min="0" max="100" value="100">
                        <canvas id="groupsContentChart" width="600" height="500"></canvas>
                        <div id="groupsImagesContainer"></div>
                    </div>
                    <div id="vectorMetricsContent" style="display: none;"></div>
    </div>

    <script type="module" src="main.js"></script>
    <script type="module" src="sidebar.js"></script>
    <script type="module" src="llmService.js"></script>
    <script type="module" src="listPerpetuator.js"></script>
    <script type="module" src="listProcessor.js"></script>
    <script type="module" src="ratingGenerator.js"></script>
    <script type="module" src="cubeManager.js"></script>
    <script type="module" src="vectorMetrics.js"></script>
    
    </body>
</html>